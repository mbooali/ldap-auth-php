<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs for page LdapLoginReceiver.inc.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="file-name">/LdapLoginReceiver.inc.php</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
													</div>
	<div class="info-box-body">	
		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">LdapLoginReceiver.inc.php, questo file fa parte del pacchetto LdapAuthenicator, questo file non protegge alcuna pagina di perse': non fa altro che ricevere la richiesta di login con i parametri POST username e password ed inoltrarli ad LdapAuth, e'da usare nei casi in cui gia' si dispone di una pagina di login personalizzata e si vuol far uso di ldap</p>
<p class="description"><p>ATTENZIONE: dovranno essere usate le session per proteggere le altre pagine del sito (vedi esempio)</p><p>ecco un esempio di utilizzo:</p><p>siamo nella nostra pagina di login gia' esistente:</p><p>&lt;?</p><p>include(&quot;LdapAuth.inc.php&quot;);</p><p>$ldap=newLdapAuth(); //&lt;- obbligatorio</p><p>//inizio customizzazione:</p><p>$ldap-&gt;setSessionAttr(&quot;username&quot;,&quot;uid&quot;);  // verra' creato un attributo $_SESSION[&quot;username&quot;] che conterra' il campo uid preso da LDAP</p><p>$ldap-&gt;setSessionAttr(&quot;group&quot;,&quot;ou&quot;);      // verra' creato un attributo $_SESSION[&quot;group&quot;] che conterra' il campo ou preso da LDAP</p><p>$ldap-&gt;setRedirectPage(&quot;welcome.php&quot;);    // la pagina verso la quale vogliamo far redirigere l'utente che effettua il login con successo (pagina che ovviamente si protegge controllando la session)</p><p>$ldap-&gt;setErrorPage($_SERVER['SCRIPT_NAME']); //pagina di errore da mostrare in caso di login fallito (in questo caso se stessa, questa pagina ricevera'un parametro ?error=&lt;errore login&gt; in modo tale da dare la possibilita'di stampare un messaggio di errore )</p><p>include(&quot;LdapLoginReceiver.inc.php&quot;); // riceve la richiesta di login</p><p>&lt;html&gt;</p><p>&lt;form action='$_SERVER[&quot;SCRIPT_NAME&quot;]' method=&quot;POST&quot;&gt;</p><p>&lt;input name=&quot;username&quot; ..</p><p>&lt;input name=&quot;password&quot; ..</p><p>&lt;/form&gt;</p><p>e' importante che la form usi questi names per i parametri e che punti a $_SERVER[&quot;script_name&quot;]</p><p>&lt;?</p><p>include(&quot;LdapAuth.inc.php&quot;);</p><p>$ldap=new LdapAuth(); //&lt;-obbligatorio</p><p>// qui puoi customizzare i parametri di LdapAuth (vedi documentazione dei metodi della classe)</p><p>include(&quot;LdapStandalonePageProtector.inc.php&quot;);</p><p>?&gt;</p><p>&lt;html&gt;</p><p>..pagina da proteggere</p><p>&lt;/html&gt;</p><p>questo piccolo pezzo di codice messo sopra qualsiasi pagina statica o dinamica sita su server in cui gira PHP (richiede il modulo php-ldap)   implementa la protezione della pagina stessa mostrando una form di login LDAP che consentira' di accedere al contenuto protetto</p><p>ATTENZIONE: non inserire il DTD nelle pagine da proteggere con questo file poiche' verra stampato in ogni caso da LdapAuth 	usare @see LdapAuth::setDTD() per cambiare il DTD della pagina..</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Stefano Gargiulo &lt;<a href="mailto:stefano.gargiulo@garr.it">stefano.gargiulo@garr.it</a>&gt;</li>
				<li><span class="field">version:</span> 0.1</li>
			</ul>
		
			</div>
</div>
		

	
	
	
	
	<p class="notes" id="credit">
		Documentation generated on Thu, 25 Sep 2008 12:45:07 +0200 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.2</a>
	</p>
	</div></body>
</html>